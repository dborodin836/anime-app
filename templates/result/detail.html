{% extends 'base.html' %}
{% load static %}

{% block title %}| Search{% endblock %}


{% block content %}
<div class="bg-lg-dark">
  <main class="container">
<!--Banner image-->
    <div class="p-4 p-md-5 mb-4 text-white rounded bg-dark" style="background-image: url({{ data.attributes.posterImage.original }});">
      <div class="col-md-6 p-4 bg-lg-dark">
        <h1 class="display-4 fst-italic">{{ data.attributes.titles.en }}</h1>
        <p class="lead my-3">{{ data.attributes.synopsis }}</p>
        <p class="lead mb-0 text-white fw-bold">Rating:  {{ data.attributes.averageRating }}</p>
      </div>
    </div>
<!--Banner img end-->
<!-- Attributes -->
    <div class="row">
      <div class="col-md-4">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
          <div class="col p-4 d-flex flex-column position-static" style="min-height: 225px">
            <h3 class="mb-0 text-white">Episode</h3>
            <div class="mb-1 text-muted">Avg. length:  {{ data.attributes.episodeLength }} min.</div>
            <p class="card-text mb-1 text-white">No. of episodes:  {{ data.attributes.episodeCount }} ep.</p>
            <p class="card-text mb-auto text-white">Total length:  {{ data.attributes.totalLength }} min.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
          <div class="col p-4 d-flex flex-column position-static" style="min-height: 225px">
            <h3 class="mb-0 text-white">Titles</h3>
            <div class="mb-1 text-muted">Japan:  {{ data.attributes.titles.ja_jp }}</div>
            <p class="card-text mb-auto text-white">Canonical:  {{ data.attributes.canonicalTitle }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
          <div class="col p-4 d-flex flex-column position-static" style="min-height: 225px">
            <h3 class="mb-0 text-white">Rating</h3>
            <div class="mb-1 text-muted">Rating:  {{ data.attributes.averageRating }}</div>
            <p class="card-text mb-1 text-white">Popularity Rank:   {{ data.attributes.popularityRank }} th</p>
            <p class="card-text mb-1 text-white">Rating Rank:   {{ data.attributes.ratingRank }} th</p>
          </div>
        </div>
      </div>
    </div>
<!--Attributes end-->
    <main>
      <section class="py-3 text-center container">
        <div class="row py-lg-5">
          <div class="col-lg-6 col-md-8 mx-auto">
            <h1 class="fw-light text-white" style="font-size: xxx-large">Episodes</h1>
          </div>
        </div>
      </section>

      <div class="album py-5 bg-lg-dark">
        <div class="container">

          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
            {% for ep in ep_data %}
            <div class="col">
              <div class="card shadow-sm" style="min-height: 250px">
                <img width="100%%" height="60%" src="{% if ep.attributes.thumbnail.original %}{{ ep.attributes.thumbnail.original }}{% else %}{% static 'img/not_found.png' %}{% endif %}" alt="image">
                <div class="card-body">
                  <p class="card-text">{{ ep.attributes.titles.en_jp }}</p>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </main>
  </main>
</div>
{% endblock %}